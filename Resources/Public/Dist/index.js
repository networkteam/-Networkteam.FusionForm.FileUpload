(()=>{var d=a=>{if(a===0)return"0 B";let e=1024,t=["B","KB","MB","GB"],i=Math.floor(Math.log(a)/Math.log(e));return parseFloat((a/Math.pow(e,i)).toFixed(2))+" "+t[i]},p=a=>{let e=document.createElement("img");return e.src=URL.createObjectURL(a),e.onload=()=>URL.revokeObjectURL(e.src),e.width=100,e};var f=(a,e)=>{if(!e)return!0;let t=/^(\d+(\.\d+)?)\s*(B|K|M|G|KB|MB|GB)?$/i,i=e.match(t);if(!i)return console.error("Invalid maxFileSize string:",e),!1;let[,r,,s="B"]=i,n=parseFloat(r)*({B:1,K:1024,M:1024*1024,G:1024*1024*1024,KB:1024,MB:1024*1024,GB:1024*1024*1024}[s.toUpperCase()]||1);return a.size<=n},c=f;var v=(a,e)=>{if(!e)return!0;let t=e.split(",").map(s=>s.trim().toLowerCase()),i=a.type.toLowerCase(),r=a.name.split(".").pop()?.toLowerCase();return t.some(s=>{if(s===i)return!0;if(s.endsWith("/*")){let[n]=s.split("/");return i.startsWith(`${n}/`)}return!!(s.startsWith(".")&&s.slice(1)===r)})},m=v;var u=(a,e)=>{let t=e.accept,i=e.dataset.maxFileSize||"",r=e.dataset.maxUploadSize||"";return t&&!m(a,t)?(console.error(`File type ${a.type} is not allowed`),!1):i&&!c(a,i)?(console.error(`File size exceeds the maximum limit of ${i}`),!1):!0};var o=class{input;container;fileList;dataTransfer;constructor(e,t){this.input=e,this.dataTransfer=new DataTransfer,this.setupInput(),t&&this.setupDropArea(t)}setupInput(){this.container=document.createElement("div"),this.container.className="file-upload-container",this.input.parentNode?.insertBefore(this.container,this.input),this.container.appendChild(this.input),this.fileList=document.createElement("div"),this.fileList.className="file-list",this.container.appendChild(this.fileList),this.input.addEventListener("change",()=>this.handleFiles())}setupDropArea(e){let t=document.querySelector(e);if(!t){console.error("Drop area selector provided but no element was found");return}["dragenter","dragover","dragleave","drop"].forEach(r=>{t.addEventListener(r,i,!1)});function i(r){r.preventDefault(),r.stopPropagation()}["dragenter","dragover"].forEach(r=>{t.addEventListener(r,()=>t.classList.add("highlight"))}),["dragleave","drop"].forEach(r=>{t.addEventListener(r,()=>t.classList.remove("highlight"))}),t.addEventListener("drop",r=>{let n=r.dataTransfer?.files;n&&this.addFiles(Array.from(n))})}handleFiles(){let e=Array.from(this.input.files||[]);this.addFiles(e)}addFiles(e){e.forEach(t=>{u(t,this.input)?(this.dataTransfer.items.add(t),this.addFileToList(t)):console.error(`File ${t.name} is not valid`)}),this.updateInputFiles()}addFileToList(e){let t=document.createElement("span");t.className="file-block";let i=document.createElement("span");i.className="name",i.textContent=e.name;let r=document.createElement("span");r.className="size",r.textContent=` (${d(e.size)})`;let s=document.createElement("span");if(s.className="file-delete",s.innerHTML="<span>Delete</span>",s.onclick=()=>this.removeFile(e.name,t),t.appendChild(s),t.appendChild(i),t.appendChild(r),e.type.startsWith("image/")){let n=p(e);t.appendChild(n)}this.fileList.appendChild(t)}removeFile(e,t){t.remove();for(let i=0;i<this.dataTransfer.items.length;i++)if(this.dataTransfer.items[i].kind==="file"){let r=this.dataTransfer.items[i].getAsFile();if(r&&r.name===e){this.dataTransfer.items.remove(i);break}}this.updateInputFiles()}updateInputFiles(){this.input.files=this.dataTransfer.files}},h=o;var l=class{selector;dropAreaSelector;inputs=[];constructor(e){this.selector=e.selector,this.dropAreaSelector=e.dropAreaSelector||"",this.init()}init(){document.querySelectorAll(this.selector).forEach(t=>{this.inputs.push(new h(t,this.dropAreaSelector))})}};window.FileUploadPlugin=l;})();
//# sourceMappingURL=index.js.map
